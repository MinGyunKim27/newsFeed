<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>뉴스피드</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="sidebar">
    <h1>PicFlow</h1>
    <div class="menu-wrapper">
        <div class="menu-item" onclick="goTo('newsfeed.html')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>
            홈
        </div>
        <div class="menu-item" onclick="goTo('search.html')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
            </svg>
            검색
        </div>
        <div class="menu-item" onclick="openModal()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="16"/>
                <line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
            만들기
        </div>
        <div class="menu-item" onclick="goTo('mypage.html')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
            프로필
        </div>
    </div>
</div>

<div class="feed-container">
    <div class="post-trigger" onclick="openModal()">
        <img id="profile-img" src="https://via.placeholder.com/40" alt="프로필" />
        <span>새로운 소식이 있나요?</span>
        <button>게시</button>
    </div>

    <div id="post-list"></div>
</div>

<!-- 이미지 확대 모달 (수정된 부분) -->
<div id="imageModal" class="modal" onclick="closeImageModal()">
    <img id="modalImage" alt="확대 이미지" src="" onclick="event.stopPropagation();">
</div>

<!-- 게시물 작성 모달 -->
<div id="overlay" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <h3>게시물 작성</h3>
        <input type="text" id="postTitle" placeholder="제목을 입력하세요..." class="input-field" />
        <textarea id="postContent" placeholder="내용을 입력하세요..." class="input-field" style="height: 100px;"></textarea>
        <input type="file" id="imageUpload" accept="image/*" style="margin-top:10px;" />

        <div style="margin-top:15px; text-align:right;">
            <button onclick="closeModal()" class="modal-button cancel">취소</button>
            <button onclick="submitPost()" class="modal-button submit" style="margin-left: 10px;">게시</button>
        </div>
    </div>
</div>

<script src="/js/newsfeed.js"></script>

<!-- 게시물 수정 모달 -->
<div id="editPostModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
    <div style="background: white; padding: 20px; border-radius: 12px; width: 90%; max-width: 500px;">
        <h3>게시물 수정</h3>
        <input type="text" id="editPostTitle" placeholder="제목" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 6px;">
        <textarea id="editPostContent" placeholder="내용" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 6px; height: 100px; resize: vertical;"></textarea>
        <input type="file" id="editImageUpload" accept="image/*" style="margin-bottom: 10px;">
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="closeEditPostModal()" style="padding: 8px 16px; background: #e5e7eb; border: none; border-radius: 6px; cursor: pointer;">취소</button>
            <button onclick="updatePost()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">수정</button>
        </div>
    </div>
</div>
</body>
</html>